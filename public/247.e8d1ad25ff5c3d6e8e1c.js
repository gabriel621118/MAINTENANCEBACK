"use strict";(self.webpackChunkgemis=self.webpackChunkgemis||[]).push([[247],{3247:(v,u,i)=>{i.r(u),i.d(u,{AuthModule:()=>h});var c=i(8583),p=i(8239),n=i(665),d=i(8259),l=i.n(d),t=i(7716),f=i(7556),m=i(4330);const g=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auth"]],decls:1,vars:0,template:function(o,r){1&o&&t._UZ(0,"router-outlet")},directives:[m.lC],styles:[""]}),e})(),children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class e{constructor(o,r,s){this.fm=o,this.authService=r,this.router=s,this.form=this.fm.group({email:["",[n.kI.required,n.kI.email]],password:["",[n.kI.required,n.kI.minLength(5)]]})}ngOnInit(){}login(){var o=this;return(0,p.Z)(function*(){if(o.form.valid){l().fire({title:"Cargando...",html:'\n        <div style="margin-top: 20px;">\n          <div class="spinner-border" role="status">\n              <span class="visually-hidden"></span>\n          </div>        \n        </div>',allowOutsideClick:!1,heightAuto:!0,showConfirmButton:!1});const r=yield o.authService.login(o.form.value);if(!r)return l().close(),void l().fire({toast:!0,title:"Error",text:"No se pudo conectar con el servidor",icon:"error",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0});r.ok?(localStorage.setItem("token",r.token),localStorage.setItem("employeeId",r.data.id),localStorage.setItem("acceso","true"),localStorage.setItem("name",r.data.name),localStorage.setItem("surname",r.data.surname),localStorage.setItem("email",r.data.email),o.authService.loggedIn=!0,o.router.navigateByUrl("/dashboard"),l().close()):l().fire({toast:!0,title:"Error",text:"Credenciales Invalidas",icon:"error",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}else l().fire({toast:!0,title:"Error",text:"Formulario inv\xe1lido",icon:"error",position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})})()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(n.qu),t.Y36(f.e),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:22,vars:1,consts:[[1,"row","w-100","mx-0","auth-page"],[1,"col-md-8","col-xl-6","mx-auto"],[1,"card"],[1,"row"],[1,"col-md-5","pr-md-0"],[1,"auth-left-wrapper"],[1,"col-md-7","pl-md-0"],[1,"auth-form-wrapper","px-4","py-5"],["src","/assets/imagenes/icosimo.png","width","250px",1,"mb-3",2,"display","block","margin","auto"],["autocomplete","off",1,"forms-sample",3,"formGroup","ngSubmit"],[1,"form-group"],["for","exampleInputEmail1"],["formControlName","email","type","email","placeholder","Correo",1,"form-control"],["for","exampleInputPassword1"],["formControlName","password","type","password","placeholder","Contrase\xf1a",1,"form-control",3,"keyup.enter"],[1,"form-check","form-check-flat","form-check-primary"],[1,"mt-3","text-center"],["type","submit",1,"btn","btn-primary","mr-2","mb-2","mb-md-0",3,"click"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._UZ(5,"div",5),t.qZA(),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t._UZ(8,"img",8),t.TgZ(9,"form",9),t.NdJ("ngSubmit",function(){return r.login()}),t.TgZ(10,"div",10),t.TgZ(11,"label",11),t._uU(12,"Correo"),t.qZA(),t._UZ(13,"input",12),t.qZA(),t.TgZ(14,"div",10),t.TgZ(15,"label",13),t._uU(16,"Contrase\xf1a"),t.qZA(),t.TgZ(17,"input",14),t.NdJ("keyup.enter",function(){return r.login()}),t.qZA(),t.qZA(),t.qZA(),t._UZ(18,"div",15),t.TgZ(19,"div",16),t.TgZ(20,"button",17),t.NdJ("click",function(){return r.login()}),t._uU(21,"Login"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(9),t.Q6J("formGroup",r.form))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u],styles:[""]}),e})()}]}];let h=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez,n.UX,m.Bz.forChild(g)]]}),e})()}}]);