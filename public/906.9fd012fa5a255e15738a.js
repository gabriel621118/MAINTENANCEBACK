"use strict";(self.webpackChunkgemis=self.webpackChunkgemis||[]).push([[906],{4906:(V,x,n)=>{n.r(x),n.d(x,{GatekeeperModule:()=>Y});var p=n(8583),d=n(8239),f=n(6239),v=n(5102),m=n(3501),h=n(6453),l=n(665),s=n(7716),Z=n(3635),b=n(4330),_=n(9595),T=n(1937);function U(e,a){1&e&&(s.TgZ(0,"small",20),s._uU(1," Ingrese Descripcion por lo menos de 5 Letras "),s.qZA())}function C(e,a){1&e&&(s.TgZ(0,"small",20),s._uU(1," Ingrese la Falla por lo menos de 5 Letras "),s.qZA())}function F(e,a){1&e&&(s.TgZ(0,"small",20),s._uU(1," Ingrese Descripcion por lo menos de 5 Letras "),s.qZA())}function L(e,a){if(1&e&&(s.TgZ(0,"option",14),s._uU(1),s.qZA()),2&e){const t=a.$implicit;s.Q6J("value",t.id),s.xp6(1),s.hij("",t.descripcion," ")}}let k=(()=>{class e{constructor(t,o,i,c,r,u){this.activeModal=t,this.fm=o,this.router=i,this.conexion=c,this.tipoavisosService=r,this.modalService=u,this.status=[],this.numstatus=!1,this.imagen="icosimo.png",this.letrero="gabriel",this.AvisosFormGroup=this.fm.group({id:[null],descripcion:[null,[l.kI.required]],falla:[null,[l.kI.required]],historial:[null,[l.kI.required]],selectstatus:[null,[l.kI.required]]})}vertodosstatusavisos(){var t=this;return(0,d.Z)(function*(){t.status=yield t.tipoavisosService.ObtenerStatusavisosPromise(),console.log("estas son las avisos de trabajoxx",t.status)})()}ngOnInit(){console.log(this.Aviso),this.editarAviso(this.Aviso),this.vertodosstatusavisos(),this.cambiastatus2(),this.cambiastatus()}editarAviso(t){switch(console.log("Este es el aviso para editar",t),this.AvisosFormGroup.controls.id.setValue(t.id),this.AvisosFormGroup.controls.descripcion.setValue(t.encabezado),this.AvisosFormGroup.controls.falla.setValue(t.falla),this.AvisosFormGroup.controls.historial.setValue(t.historial),this.AvisosFormGroup.controls.selectstatus.setValue(t.avisostatusId),this.Aviso.avisostatusId){case 13:this.numstatus=!0,this.imagen="reject.jpg",this.letrero="RECHAZAR",console.log("valor del statusxxxxxxxxxxxxx",this.AvisosFormGroup.value.selectstatus);break;case 14:this.numstatus=!0,this.imagen="cerrado.png",this.letrero="CERRAR",console.log("valor del status",this.AvisosFormGroup.value.selectstatus)}}get descripNoValido(){var t,o;return(null===(t=this.AvisosFormGroup.get("descripcion"))||void 0===t?void 0:t.invalid)&&(null===(o=this.AvisosFormGroup.get("descripcion"))||void 0===o?void 0:o.touched)}get fallaNoValido(){var t,o;return(null===(t=this.AvisosFormGroup.get("falla"))||void 0===t?void 0:t.invalid)&&(null===(o=this.AvisosFormGroup.get("falla"))||void 0===o?void 0:o.touched)}get histoNoValido(){var t,o;return(null===(t=this.AvisosFormGroup.get("historial"))||void 0===t?void 0:t.invalid)&&(null===(o=this.AvisosFormGroup.get("historrial"))||void 0===o?void 0:o.touched)}cambiastatus(){switch(console.log("si entro a cambiar el status",this.AvisosFormGroup.value.selectstatus),this.AvisosFormGroup.value.selectstatus){case"0":this.numstatus=!1,console.log("valor del statusxxxxxxxxxxxxx",this.AvisosFormGroup.value.selectstatus,this.numstatus);break;case"11":this.numstatus=!1,this.imagen="open.png",this.letrero="ABIERTO",console.log("valor del statusxxxxxxxxxxxxx",this.AvisosFormGroup.value.selectstatus);break;case"13":this.numstatus=!1,this.imagen="reject.jpg",this.letrero="RECHAZAR",console.log("valor del statusxxxxxxxxxxxxx",this.AvisosFormGroup.value.selectstatus);break;case"14":this.numstatus=!1,this.imagen="cerrado.png",this.letrero="CERRAR",console.log("valor del status",this.AvisosFormGroup.value.selectstatus)}}cambiastatus2(){switch(console.log("si entro a cambiar el status",this.AvisosFormGroup.value.selectstatus),this.AvisosFormGroup.value.selectstatus){case 11:this.numstatus=!1,this.imagen="open.png",this.letrero="ABIERTO",console.log("valor del statusxxxxxxxxxxxxx",this.AvisosFormGroup.value.selectstatus);break;case 13:this.numstatus=!1,this.imagen="reject.jpg",this.letrero="RECHAZAR",console.log("valor del statusxxxxxxxxxxxxx",this.AvisosFormGroup.value.selectstatus);break;case 14:this.numstatus=!1,this.imagen="cerrado.png",this.letrero="CERRAR",console.log("valor del status",this.AvisosFormGroup.value.selectstatus)}}cambiarAviso(){if(this.AvisosFormGroup.invalid)return Object.values(this.AvisosFormGroup.controls).forEach(t=>{t instanceof l.cw?Object.values(t.controls).forEach(o=>o.markAsTouched()):t.markAsTouched()});this.conexion.Libera_Avisos(this.AvisosFormGroup.value).subscribe(t=>{t.ok&&(console.log("cambiado"),this.activeModal.close()),this.AvisosFormGroup.reset()})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Z.Kz),s.Y36(l.qu),s.Y36(b.gz),s.Y36(_.U),s.Y36(T.p),s.Y36(Z.FF))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-update-liberavisos"]],inputs:{Aviso:"Aviso"},decls:52,vars:20,consts:[[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"col-2","col-form-label"],[1,"col-8"],["type","text","placeholder","Descripcion","formControlName","descripcion",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Falla","formControlName","falla",1,"form-control"],["type","text","placeholder","Historial","formControlName","historial",1,"form-control"],["formControlName","selectstatus","Class","select-css",3,"change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"btn","btn-outline-primary",3,"disabled","click"],["width","30px","height","30px",1,"text-center",3,"src"],[1,"text-danger"]],template:function(t,o){1&t&&(s.TgZ(0,"p"),s._uU(1,"update-liberavisos works!"),s.qZA(),s.TgZ(2,"div",0),s.TgZ(3,"h5",1),s._uU(4,"Liberacion de Avisos"),s.qZA(),s.TgZ(5,"button",2),s.NdJ("click",function(){return o.activeModal.dismiss()}),s.TgZ(6,"span",3),s._uU(7,"\xd7"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"div",4),s.TgZ(9,"form",5),s.NdJ("ngSubmit",function(){return o.cambiarAviso()}),s.TgZ(10,"div"),s._UZ(11,"p"),s.TgZ(12,"div",6),s.TgZ(13,"label",7),s._uU(14,"Descripcion"),s.qZA(),s.TgZ(15,"div",8),s._UZ(16,"input",9),s.YNc(17,U,2,0,"small",10),s.qZA(),s.qZA(),s.TgZ(18,"div",6),s.TgZ(19,"label",7),s._uU(20,"Descripcion"),s.qZA(),s.TgZ(21,"div",8),s._UZ(22,"input",11),s.YNc(23,C,2,0,"small",10),s.qZA(),s.qZA(),s.TgZ(24,"div",6),s.TgZ(25,"label",7),s._uU(26,"Hisotorial"),s.qZA(),s.TgZ(27,"div",8),s._UZ(28,"input",12),s.YNc(29,F,2,0,"small",10),s.qZA(),s.qZA(),s.TgZ(30,"div",6),s.TgZ(31,"label",7),s._uU(32,"Lineas"),s.qZA(),s.TgZ(33,"div",8),s.TgZ(34,"select",13),s.NdJ("change",function(){return o.cambiastatus()}),s.TgZ(35,"option",14),s._uU(36,"Escoge una Opcion"),s.qZA(),s.YNc(37,L,2,2,"option",15),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(38,"div",16),s.TgZ(39,"button",17),s.NdJ("click",function(){return o.activeModal.dismiss()}),s._uU(40,"Close"),s.qZA(),s.TgZ(41,"button",18),s.NdJ("click",function(){return o.cambiarAviso()}),s._UZ(42,"img",19),s._uU(43),s.qZA(),s.qZA(),s._UZ(44,"hr"),s.TgZ(45,"pre"),s._uU(46),s._UZ(47,"br"),s._uU(48),s.qZA(),s.TgZ(49,"pre"),s._uU(50),s.ALo(51,"json"),s.qZA()),2&t&&(s.xp6(9),s.Q6J("formGroup",o.AvisosFormGroup),s.xp6(7),s.ekj("is-invalid",o.descripNoValido),s.xp6(1),s.Q6J("ngIf",o.descripNoValido),s.xp6(5),s.ekj("is-invalid",o.fallaNoValido),s.xp6(1),s.Q6J("ngIf",o.fallaNoValido),s.xp6(5),s.ekj("is-invalid",o.histoNoValido),s.xp6(1),s.Q6J("ngIf",o.histoNoValido),s.xp6(6),s.Q6J("value",0),s.xp6(2),s.Q6J("ngForOf",o.status),s.xp6(4),s.Q6J("disabled",o.numstatus),s.xp6(1),s.MGl("src","/assets/imagenes/",o.imagen,"",s.LSH),s.xp6(1),s.hij("",o.letrero," "),s.xp6(3),s.hij("  Estado del formulario: ",o.AvisosFormGroup.valid,"\n  "),s.xp6(2),s.hij("\n  Status: ",o.AvisosFormGroup.status,"\n"),s.xp6(2),s.hij("\n  ",s.lcZ(51,18,o.AvisosFormGroup.value),"\n\n"))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,p.O5,l.EJ,l.YN,l.Kr,p.sg],pipes:[p.Ts],styles:[""]}),e})();var G=n(1711),O=n(2794),y=n(6646),S=n(697);function j(e,a){if(1&e){const t=s.EpF();s.TgZ(0,"li"),s.TgZ(1,"button",10),s.NdJ("click",function(){const c=s.CHM(t).$implicit,r=s.oxw();return[r.idgrupo=c.id,r.veravisosxgpotrabajo()]}),s.TgZ(2,"span"),s._uU(3),s.qZA(),s.qZA(),s.qZA()}if(2&e){const t=a.$implicit;s.xp6(3),s.Oqu(t.descripcion)}}function N(e,a){if(1&e){const t=s.EpF();s.TgZ(0,"li"),s.TgZ(1,"button",10),s.NdJ("click",function(){const c=s.CHM(t).$implicit,r=s.oxw();return[r.idtipo=c.id,r.veravisosxtipoaviso()]}),s.TgZ(2,"span"),s._uU(3),s.qZA(),s.qZA(),s.qZA()}if(2&e){const t=a.$implicit;s.xp6(3),s.Oqu(t.descripcion)}}function M(e,a){if(1&e){const t=s.EpF();s.TgZ(0,"li"),s.TgZ(1,"button",10),s.NdJ("click",function(){const c=s.CHM(t).$implicit,r=s.oxw();return[r.idstatus=c.id,r.veravisosxstatus()]}),s.TgZ(2,"span"),s._uU(3),s.qZA(),s.qZA(),s.qZA()}if(2&e){const t=a.$implicit;s.xp6(3),s.Oqu(t.descripcion)}}function J(e,a){if(1&e){const t=s.EpF();s.TgZ(0,"td",15),s.TgZ(1,"img",16),s.NdJ("click",function(){s.CHM(t);const i=s.oxw().$implicit;return[s.oxw().guardarOrdentrabajo2(i)]}),s.qZA(),s.qZA()}}function I(e,a){if(1&e){const t=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.TgZ(9,"td"),s._uU(10),s.TgZ(11,"img",13),s.NdJ("click",function(){const c=s.CHM(t).$implicit,r=s.oxw();return[r.idaviso=c.id,r.openModalUpdateLiberavisos(c)]}),s.qZA(),s.qZA(),s.TgZ(12,"td"),s._uU(13),s.qZA(),s.TgZ(14,"td"),s._uU(15),s.qZA(),s.YNc(16,J,2,0,"td",14),s.qZA()}if(2&e){const t=a.$implicit,o=s.oxw();s.xp6(2),s.Oqu(t.id),s.xp6(2),s.Oqu(t.encabezado),s.xp6(2),s.Oqu(t.grupotrabajo.descripcion),s.xp6(2),s.Oqu(t.avisotipo.clave),s.xp6(2),s.Oqu(o.poneimagen(t.avisostatusId)),s.xp6(1),s.s9C("src",o.ruta,s.LSH),s.xp6(2),s.Oqu(t.avisostatus.clave),s.xp6(2),s.Oqu(t.equipo.ubicacione.descripcion),s.xp6(1),s.Q6J("ngIf",16==t.avisostatusId)}}const E=[{path:"libera_avisos",component:(()=>{class e{constructor(t,o,i,c,r,u,q,g,A){this.fb=t,this.avisosService=o,this.tipoavisosService=i,this.conexion=c,this.grupoService=r,this.depaService=u,this.ubiService=q,this.modalService=g,this.router=A,this.avisos=[],this.avisosabiertos=[],this.grupos=[],this.tipos=[],this.status=[],this.ordenescoger=[],this.search="",this.idstatus=0,this.idtipo=0,this.idgrupo=0,this.idaviso=0,this.sumpromedio=0,this.sumawcapital=0,this.ruta="/assets/imagenes/open.png"}vertodosgrupos(){this.sumpromedio=0,this.sumawcapital=0,this.grupoService.Obtener_Grupostrabajo().subscribe(t=>{this.grupos=t.data})}Lista_TodosAvisos(){var t=this;return(0,d.Z)(function*(){t.avisos=yield t.avisosService.ObtenerTodosAvisosPromise(),console.log("esta es la lista de todos avisos",t.avisos)})()}vertodoslosavisos(){var t=this;return(0,d.Z)(function*(){t.avisosabiertos=yield t.avisosService.ObtenerAvisosPromise(),console.log("estas son las avisos de trabajoxx",t.avisos)})()}vertodostipoavisos(){var t=this;return(0,d.Z)(function*(){t.tipos=yield t.tipoavisosService.ObtenerTipoavisosPromise(),console.log("estas son las avisos de trabajoxx",t.tipos)})()}vertodosstatusavisos(){var t=this;return(0,d.Z)(function*(){t.status=yield t.tipoavisosService.ObtenerStatusavisosPromise(),console.log("estas son las avisos de trabajoxx",t.status)})()}veravisosxstatus(){this.avisosService.Obtener_Avisosxstatus(this.idstatus).subscribe(t=>{this.avisos=t.data,console.log("--------------------x status,",this.avisos)})}veravisosxgpotrabajo(){this.avisosService.Obtener_Avisosxgpotrabajo(this.idgrupo).subscribe(t=>{this.avisos=t.data,console.log("--------------------x grupo",this.avisos)})}veravisosxtipoaviso(){this.avisosService.Obtener_Avisosxtipoaviso(this.idtipo).subscribe(t=>{this.avisos=t.data,console.log("-------------------x tipo de aviso",this.avisos)})}openModalUpdateLiberavisos(t){var o=this;console.log(t);const i=this.modalService.open(k,{size:"lg"});i.componentInstance.Aviso=t,i.result.then((0,d.Z)(function*(){yield o.vertodoslosavisos()}))}guardarOrdentrabajo2(t){const o=t;switch(o.avisotipoId){case 5:this.idtipo=6;break;case 6:this.idtipo=7;break;case 7:this.idtipo=8;break;case 8:this.idtipo=9;break;case 9:this.idtipo=10}const i={id:0,plan_decripcion:o.encabezado,planeId:6,orden_fechaini:new Date,orden_fechafin:new Date,orden_costoinicial:0,orden_costofinal:0,orden_Aviso:this.idaviso,updatedAt:new Date,createdAt:new Date,ordentipoId:this.idtipo,ordenstatusId:5,equipoId:o.equipoId};console.log("ESTE ES EL ARREGLO DEL BODY*******************",i),console.log("este es el arreglo de pedidos-------------------------\x3e",i),this.conexion.Crear_Ordenessinplan(i).subscribe(c=>{console.log("Estos son los campos que se van grabar*****************",i),this.vertodoslosavisos()})}ngOnInit(){this.vertodosgrupos(),this.vertodoslosavisos(),this.vertodoslosavisos(),this.vertodostipoavisos(),this.vertodosstatusavisos(),this.veravisosxstatus(),this.Lista_TodosAvisos()}definirStatus(t,o,i){const c=new Date(t);c.setMonth(c.getMonth()+o);const r=(0,v.Z)(c),u=new Date,g=i;return u>r?"/assets/imagenes/red.png":u<(0,f.Z)(r,g)?"/assets/imagenes/green.png":u>=(0,f.Z)(r,g)&&u<=r?"/assets/imagenes/yellow.jpg":"/assets/iimagenes/white.png"}cambiarFecha(t){return(0,h.Z)((0,m.Z)((0,v.Z)(t),1),"dd/MM/yyyy")}proximomantto(t,o,i){return(t=new Date(t)).setMonth(t.getMonth()+(o-i)),(0,h.Z)((0,m.Z)((0,v.Z)(t),0),"dd/MM/yyyy")}adiconarmeses(t,o){const i=new Date(t);return i.setMonth(i.getMonth()+o),(0,h.Z)((0,m.Z)((0,v.Z)(i),0),"dd/MM/yyyy")}poneimagen(t){switch(t){case 15:this.ruta="/assets/imagenes/open.png";break;case 16:this.ruta="/assets/imagenes/icosimo.png";break;case 17:this.ruta="/assets/imagenes/reject.jpg";break;case 18:this.ruta="/assets/imagenes/cerrado.png"}}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(l.qu),s.Y36(_.U),s.Y36(T.p),s.Y36(G.Z),s.Y36(O.B),s.Y36(y.r),s.Y36(S.k),s.Y36(Z.FF),s.Y36(b.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-libera-avisos"]],decls:53,vars:4,consts:[[1,"navbar","navbar-expand-lg"],[1,"container-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-primary","btn-block",3,"click"],[1,"table"],["scope","col"],["width","30px","data-toggle","modal","data-target","#exampleModal",2,"cursor","pointer",3,"src","click"],["class","text-center",4,"ngIf"],[1,"text-center"],["src","/assets/imagenes/lanzaplan.png","width","30px","data-toggle","modal","data-target","#exampleModal",2,"cursor","pointer",3,"click"]],template:function(t,o){1&t&&(s.TgZ(0,"p"),s._uU(1,"libera-avisos works!xxxxxxx"),s.qZA(),s.TgZ(2,"nav",0),s.TgZ(3,"div",1),s.TgZ(4,"button",2),s._UZ(5,"span",3),s.qZA(),s.TgZ(6,"div",4),s.TgZ(7,"ul",5),s.TgZ(8,"li",6),s.TgZ(9,"a",7),s._uU(10," Grupos Trabajo"),s.qZA(),s.TgZ(11,"ul",8),s.YNc(12,j,4,1,"li",9),s.qZA(),s.qZA(),s.TgZ(13,"li",6),s.TgZ(14,"a",7),s._uU(15,"Ver Tipo de Aviso"),s.qZA(),s.TgZ(16,"ul",8),s.YNc(17,N,4,1,"li",9),s.qZA(),s.qZA(),s.TgZ(18,"li",6),s.TgZ(19,"a",7),s._uU(20,"Ver Status de Aviso"),s.qZA(),s.TgZ(21,"ul",8),s.YNc(22,M,4,1,"li",9),s.qZA(),s.qZA(),s.TgZ(23,"li",6),s.TgZ(24,"a",7),s._uU(25," Ver Todos"),s.qZA(),s.TgZ(26,"ul",8),s.TgZ(27,"li"),s.TgZ(28,"button",10),s.NdJ("click",function(){return[o.idstatus=11,o.Lista_TodosAvisos()]}),s.TgZ(29,"span"),s._uU(30,"VER TODOS "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(31,"hr"),s._UZ(32,"p"),s.TgZ(33,"table",11),s.TgZ(34,"thead"),s.TgZ(35,"tr"),s.TgZ(36,"th",12),s._uU(37,"Idem"),s.qZA(),s.TgZ(38,"th",12),s._uU(39,"Descripcion"),s.qZA(),s.TgZ(40,"th",12),s._uU(41,"Gpo Trabajo"),s.qZA(),s.TgZ(42,"th",12),s._uU(43,"Tipo"),s.qZA(),s._UZ(44,"th",12),s.TgZ(45,"th",12),s._uU(46,"Status"),s.qZA(),s.TgZ(47,"th",12),s._uU(48,"Ubicacion"),s.qZA(),s.TgZ(49,"th",12),s._uU(50,"Liberar"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(51,"tbody"),s.YNc(52,I,17,9,"tr",9),s.qZA(),s.qZA()),2&t&&(s.xp6(12),s.Q6J("ngForOf",o.grupos),s.xp6(5),s.Q6J("ngForOf",o.tipos),s.xp6(5),s.Q6J("ngForOf",o.status),s.xp6(30),s.Q6J("ngForOf",o.avisosabiertos))},directives:[p.sg,p.O5],styles:[""]}),e})()}];let Y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[p.ez,b.Bz.forChild(E),l.UX,l.u5]]}),e})()}}]);